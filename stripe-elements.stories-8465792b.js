import{_ as e,a as t}from"./_rollupPluginBabelHelpers-b2683669.js";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.errorDisplay=exports.validationStates=exports.generateASource=exports.generateAToken=exports.enterAStripePublishableKey=void 0;var r=require("/home/runner/work/stripe-elements/stripe-elements/node_modules/@open-wc/storybook-prebuilt/dist/preview.js"),n=require("@open-wc/demoing-storybook"),o=require("lit-html");require("@material/mwc-textfield"),require("@material/mwc-button"),require("../src/stripe-elements.js"),require("@power-elements/json-viewer");var l=require("./helpers.js");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const i={},a="wrapper";function m(m){let{components:d}=m,p=t(m,["components"]);return(0,r.mdx)(a,s({},i,p,{components:d,mdxType:"MDXLayout"}),(0,r.mdx)(n.Meta,{title:"Stripe Elements",mdxType:"Meta"}),(0,r.mdx)("h1",null,"Stripe Elements Web Component"),(0,r.mdx)("p",null,"The ",(0,r.mdx)("inlineCode",{parentName:"p"},"<stripe-elements>")," custom element is an easy way to use stripe.js in your web app.\nTo get started, add the element to your page with the ",(0,r.mdx)("inlineCode",{parentName:"p"},"publishable-key")," attribute set to your\n",(0,r.mdx)("a",s({parentName:"p"},{href:"https://dashboard.stripe.com/account/apikeys"}),"Stripe publishable key"),". You can also set the ",(0,r.mdx)("inlineCode",{parentName:"p"},"publishableKey")," DOM property using JavaScript"),(0,r.mdx)("pre",null,(0,r.mdx)("code",s({parentName:"pre"},{className:"language-html"}),'<stripe-elements publishable-key="my-pk"></stripe-elements>\n')),(0,r.mdx)("pre",null,(0,r.mdx)("code",s({parentName:"pre"},{className:"language-html"}),"<stripe-elements></stripe-elements>\n<script>\n $('stripe-elements').publishableKey = 'my-pk';\n<\/script>\n")),(0,r.mdx)("p",null,(0,r.mdx)("strong",{parentName:"p"},"Careful!")," never add your ",(0,r.mdx)("strong",{parentName:"p"},"secret key")," to an HTML page, only publish your ",(0,r.mdx)("strong",{parentName:"p"},"publishable key"),"."),(0,r.mdx)("p",null,"Once you've set the ",(0,r.mdx)("inlineCode",{parentName:"p"},"publishable-key")," attribute (or the ",(0,r.mdx)("inlineCode",{parentName:"p"},"publishableKey")," DOM property), Stripe will create a Stripe Card Element on your page."),(0,r.mdx)("p",null,"Enter your publishable key here (use the test key, not the production key) to run the examples against your Stripe account."),(0,r.mdx)(n.Preview,{mdxType:"Preview"},(0,r.mdx)(n.Story,{name:"Enter a Stripe Publishable Key",mdxType:"Story"},o.html` <mwc-textfield style="width: 100%" outlined label="Publishable Key" value="dummy-key" @change="${l.setPublishableKey}"></mwc-textfield> `)),(0,r.mdx)("h2",null,"Create a Token"),(0,r.mdx)("p",null,"Once you're set your publishable key and Stripe has instantiated (listen for the ",(0,r.mdx)("inlineCode",{parentName:"p"},"stripe-ready")," event if you need to know exactly when this happens),\nyou may generate a token from the filled-out form by calling the ",(0,r.mdx)("inlineCode",{parentName:"p"},"createToken()")," method."),(0,r.mdx)(n.Preview,{withToolbar:!0,mdxType:"Preview"},(0,r.mdx)(n.Story,{name:"Generate a Token",height:"60px",mdxType:"Story"},()=>{const e=(0,l.$)("#token-viewer");return o.html` <section id="token"> <stripe-elements publishable-key="dummy-key" @stripe-token="${t=>{let{detail:r}=t;return e.object=r}}"></stripe-elements> <mwc-button class="generate" outlined @click="${()=>(0,l.$)("#token stripe-elements").createToken()}">Generate Token</mwc-button> </section> `})),(0,r.mdx)("p",null,(0,r.mdx)("json-viewer",{id:"token-viewer"})),(0,r.mdx)("h2",null,"Create a Source"),(0,r.mdx)(n.Preview,{withToolbar:!0,mdxType:"Preview"},(0,r.mdx)(n.Story,{name:"Generate a Source",height:"500px",mdxType:"Story"},()=>{const t=()=>[...(0,l.$)("#source").querySelectorAll("mwc-textfield")].reduce((t,r)=>{let{value:n,dataset:{ownerProp:o}}=r;return e({},t,{[o]:n})},{});return o.html` <section id="source"> <stripe-elements id="source-element" publishable-key="dummy-key" @stripe-source="${e=>{let{detail:t}=e;return(0,l.$)("#source-viewer").object=t}}"></stripe-elements> <mwc-textfield outlined label="Cardholder Name" data-owner-prop="name"></mwc-textfield> <mwc-textfield outlined label="Cardholder Email" data-owner-prop="email"></mwc-textfield> <mwc-textfield outlined label="Cardholder Phone" data-owner-prop="phone"></mwc-textfield> <mwc-button outlined @click="${()=>(0,l.$)("#source stripe-elements").createSource({type:"card",owner:t()})}">Generate Source</mwc-button> </section> `})),(0,r.mdx)("p",null,(0,r.mdx)("json-viewer",{id:"source-viewer"})),(0,r.mdx)("h2",null,"Validation"),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"<stripe-elements>")," comes with several properties, events, and methods for validation.\nListen for the\n",(0,r.mdx)("inlineCode",{parentName:"p"},"is-complete-changed"),",\n",(0,r.mdx)("inlineCode",{parentName:"p"},"is-empty-changed"),", and\n",(0,r.mdx)("inlineCode",{parentName:"p"},"has-error-changed")," events\nand check the ",(0,r.mdx)("inlineCode",{parentName:"p"},"isComplete"),", ",(0,r.mdx)("inlineCode",{parentName:"p"},"isEmpty"),", and ",(0,r.mdx)("inlineCode",{parentName:"p"},"hasError")," properties to react to validation changes.\nThese properties ",(0,r.mdx)("a",s({parentName:"p"},{href:"https://dev.to/bennypowers/lets-build-web-components-part-5-litelement-906#reflecting-properties-to-attributes"}),"reflect")," to their dash-cased attributes,\nso you can use CSS to style your element in its various states."),(0,r.mdx)("pre",null,(0,r.mdx)("code",s({parentName:"pre"},{className:"language-css"}),"stripe-elements[is-empty] { border: 1px solid rebeccapurple; }\nstripe-elements[is-complete] { border: 1px solid blue; }\nstripe-elements[has-error] { border: 1px solid red; }\n")),(0,r.mdx)(n.Preview,{withToolbar:!0,mdxType:"Preview"},(0,r.mdx)(n.Story,{name:"Validation States",height:"60px",mdxType:"Story"},()=>{return o.html` <style>stripe-elements{border-radius:4px}stripe-elements[is-empty]{border:1px solid #663399}stripe-elements[is-complete]{border:1px solid #00f}stripe-elements[has-error]{border:1px solid red}</style> <section id="states"> <stripe-elements publishable-key="dummy-key"></stripe-elements> <mwc-button class="generate" outlined @click="${()=>(0,l.$)("#states stripe-elements").validate()}">Validate</mwc-button> </section> `})),(0,r.mdx)("h2",null,"Simple Validation"),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"<stripe-elements>")," has a ",(0,r.mdx)("inlineCode",{parentName:"p"},"show-error")," boolean attribute which will display the error message for you.\nThis is useful for simple validation in cases where you don't need to build your own validation UI."),(0,r.mdx)(n.Preview,{withToolbar:!0,mdxType:"Preview"},(0,r.mdx)(n.Story,{name:"Error Display",height:"60px",mdxType:"Story"},()=>{return o.html` <section id="show-errror"> <stripe-elements id="should-error" publishable-key="should-error-use-bad-key" show-error></stripe-elements> <mwc-button class="generate" outlined @click="${()=>(0,l.$)("#should-error").validate()}">Validate</mwc-button> </section> `})),(0,r.mdx)("p",null,"For more complex needs, you can listen for the ",(0,r.mdx)("inlineCode",{parentName:"p"},"stripe-error")," event."),(0,r.mdx)("h2",null,"API"),(0,r.mdx)(n.Props,{of:"stripe-elements",mdxType:"Props"}))}m.isMDXComponent=!0;const d=(0,r.makeStoryFn)(o.html` <mwc-textfield style="width: 100%" outlined label="Publishable Key" value="dummy-key" @change="${l.setPublishableKey}"></mwc-textfield> `);exports.enterAStripePublishableKey=d,d.story={},d.story.name="Enter a Stripe Publishable Key",d.story.parameters={mdxSource:'html`\n      <mwc-textfield style="width: 100%" outlined label="Publishable Key" value="dummy-key" @change="${setPublishableKey}"></mwc-textfield>\n    `'};const p=(0,r.makeStoryFn)(()=>{const e=(0,l.$)("#token-viewer");return o.html` <section id="token"> <stripe-elements publishable-key="dummy-key" @stripe-token="${t=>{let{detail:r}=t;return e.object=r}}"></stripe-elements> <mwc-button class="generate" outlined @click="${()=>(0,l.$)("#token stripe-elements").createToken()}">Generate Token</mwc-button> </section> `});exports.generateAToken=p,p.story={},p.story.name="Generate a Token",p.story.parameters={mdxSource:'() => {\n  const viewer = $(\'#token-viewer\');\n\n  const onStripeToken = ({\n    detail: token\n  }) => viewer.object = token;\n\n  const onClick = () => $(\'#token stripe-elements\').createToken();\n\n  return html`\n          <section id="token">\n            <stripe-elements publishable-key="dummy-key" @stripe-token="${onStripeToken}"></stripe-elements>\n            <mwc-button class="generate" outlined @click="${onClick}">Generate Token</mwc-button>\n          </section>\n        `;\n}'};const u=(0,r.makeStoryFn)(()=>{const t=()=>[...(0,l.$)("#source").querySelectorAll("mwc-textfield")].reduce((t,r)=>{let{value:n,dataset:{ownerProp:o}}=r;return e({},t,{[o]:n})},{});return o.html` <section id="source"> <stripe-elements id="source-element" publishable-key="dummy-key" @stripe-source="${e=>{let{detail:t}=e;return(0,l.$)("#source-viewer").object=t}}"></stripe-elements> <mwc-textfield outlined label="Cardholder Name" data-owner-prop="name"></mwc-textfield> <mwc-textfield outlined label="Cardholder Email" data-owner-prop="email"></mwc-textfield> <mwc-textfield outlined label="Cardholder Phone" data-owner-prop="phone"></mwc-textfield> <mwc-button outlined @click="${()=>(0,l.$)("#source stripe-elements").createSource({type:"card",owner:t()})}">Generate Source</mwc-button> </section> `});exports.generateASource=u,u.story={},u.story.name="Generate a Source",u.story.parameters={mdxSource:'() => {\n  const onStripeSource = ({\n    detail: source\n  }) => $(\'#source-viewer\').object = source;\n\n  const getInputs = () => [...$(\'#source\').querySelectorAll(\'mwc-textfield\')];\n\n  const getCardData = () => getInputs().reduce((data, {\n    value,\n    dataset: {\n      ownerProp\n    }\n  }) => ({ ...data,\n    [ownerProp]: value\n  }), {});\n\n  const onClick = () => $(\'#source stripe-elements\').createSource({\n    type: \'card\',\n    owner: getCardData()\n  });\n\n  return html`\n        <section id="source">\n          <stripe-elements id="source-element" publishable-key="dummy-key" @stripe-source="${onStripeSource}"></stripe-elements>\n          <mwc-textfield outlined label="Cardholder Name" data-owner-prop="name"></mwc-textfield>\n          <mwc-textfield outlined label="Cardholder Email" data-owner-prop="email"></mwc-textfield>\n          <mwc-textfield outlined label="Cardholder Phone" data-owner-prop="phone"></mwc-textfield>\n          <mwc-button outlined @click="${onClick}">Generate Source</mwc-button>\n        </section>\n        `;\n}'};const c=(0,r.makeStoryFn)(()=>{return o.html` <style>stripe-elements{border-radius:4px}stripe-elements[is-empty]{border:1px solid #663399}stripe-elements[is-complete]{border:1px solid #00f}stripe-elements[has-error]{border:1px solid red}</style> <section id="states"> <stripe-elements publishable-key="dummy-key"></stripe-elements> <mwc-button class="generate" outlined @click="${()=>(0,l.$)("#states stripe-elements").validate()}">Validate</mwc-button> </section> `});exports.validationStates=c,c.story={},c.story.name="Validation States",c.story.parameters={mdxSource:'() => {\n  const onClick = () => $(\'#states stripe-elements\').validate();\n\n  return html`\n      <style>\n        stripe-elements { border-radius: 4px; }\n        stripe-elements[is-empty] { border: 1px solid rebeccapurple; }\n        stripe-elements[is-complete] { border: 1px solid blue; }\n        stripe-elements[has-error] { border: 1px solid red; }\n      </style>\n      <section id="states">\n        <stripe-elements publishable-key="dummy-key"></stripe-elements>\n        <mwc-button class="generate" outlined @click="${onClick}">Validate</mwc-button>\n      </section>\n      `;\n}'};const y=(0,r.makeStoryFn)(()=>{return o.html` <section id="show-errror"> <stripe-elements id="should-error" publishable-key="should-error-use-bad-key" show-error></stripe-elements> <mwc-button class="generate" outlined @click="${()=>(0,l.$)("#should-error").validate()}">Validate</mwc-button> </section> `});exports.errorDisplay=y,y.story={},y.story.name="Error Display",y.story.parameters={mdxSource:'() => {\n  const onClick = () => $(\'#should-error\').validate();\n\n  return html`\n        <section id="show-errror">\n          <stripe-elements id="should-error" publishable-key="should-error-use-bad-key" show-error></stripe-elements>\n          <mwc-button class="generate" outlined @click="${onClick}">Validate</mwc-button>\n        </section>\n        `;\n}'};const h={title:"Stripe Elements",includeStories:["enterAStripePublishableKey","generateAToken","generateASource","validationStates","errorDisplay"]},b={"Enter a Stripe Publishable Key":"stripe-elements--enter-a-stripe-publishable-key","Generate a Token":"stripe-elements--generate-a-token","Generate a Source":"stripe-elements--generate-a-source","Validation States":"stripe-elements--validation-states","Error Display":"stripe-elements--error-display"};h.parameters=h.parameters||{},h.parameters.docs=e({},h.parameters.docs||{},{page:()=>(0,r.mdx)(r.AddContext,{mdxStoryNameToId:b},(0,r.mdx)(m,null))});var x=h;exports.default=x;
//# sourceMappingURL=stripe-elements.stories-8465792b.js.map
